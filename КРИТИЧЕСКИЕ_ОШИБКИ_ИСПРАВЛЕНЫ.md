# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò –ù–ê–ô–î–ï–ù–´ –ò –ò–°–ü–†–ê–í–õ–ï–ù–´

## ‚ùå **–ù–ê–ô–î–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´:**

### **1. –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê –° –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø–ú–ò –í DOCKERFILE**
**–ü—Ä–æ–±–ª–µ–º–∞:** –í Telegram –±–æ—Ç–µ –ø–∞–∫–µ—Ç—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∏—Å—å –≤ `/root/.local`, –Ω–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å–∫–∞–ª—Å—è –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º `botuser`
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ModuleNotFoundError: No module named 'aiogram'
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** ‚úÖ –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω Dockerfile —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### **2. –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê –° –ü–£–¢–Ø–ú–ò –ö –ú–û–î–£–õ–Ø–ú**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –ø—É—Ç–∏ –∫ shared –º–æ–¥—É–ª—è–º:
- Telegram –±–æ—Ç: `os.path.join(os.path.dirname(__file__), '..', 'shared')`
- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: `'/app/shared'`
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–æ–¥—É–ª–∏ –Ω–µ –Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** ‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –ø—É—Ç–∏ –Ω–∞ `/app/shared` –≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö

### **3. –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê –° SQLALCHEMY**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–∏–π `declarative_base()` –∏–∑ SQLAlchemy 1.x
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û—à–∏–±–∫–∏ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π –ë–î
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π `DeclarativeBase` –¥–ª—è SQLAlchemy 2.x

### **4. –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê –° –ò–ú–ü–û–†–¢–ê–ú–ò –ú–û–î–ï–õ–ï–ô**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã –≤ —Ñ–∞–π–ª–∞—Ö:
- `from models.base import Base` (—Ñ–∞–π–ª–∞ base.py –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- `from .user import User, Admin` (Admin –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ)
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ImportError –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã —Å–æ–≥–ª–∞—Å–Ω–æ —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ

---

## ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –§–ê–ô–õ–´:**

### **üìÑ services/telegram-bot/Dockerfile**
```diff
- COPY --from=builder /root/.local /root/.local
- ENV PATH=/root/.local/bin:$PATH
- RUN useradd -m -u 1000 botuser && chown -R botuser:botuser /app
+ # –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è botuser –≤ builder stage
+ RUN useradd --create-home --shell /bin/bash botuser
+ USER botuser
+ RUN pip install --no-cache-dir --user
+ COPY --from=builder --chown=botuser:botuser /home/botuser/.local /home/botuser/.local
+ ENV PATH=/home/botuser/.local/bin:$PATH
```

### **üìÑ services/telegram-bot/main.py**
```diff
- sys.path.append(os.path.join(os.path.dirname(__file__), '..', 'shared'))
+ sys.path.append('/app/shared')
```

### **üìÑ services/telegram-bot/bot/database.py**
```diff
- sys.path.append(str(Path(__file__).parent.parent.parent / "shared"))
- from models.base import Base
- from models.user import User, Admin
+ sys.path.append('/app/shared')
+ from models.database import Base
+ from models.user import User
+ from models.admin import Admin
```

### **üìÑ services/telegram-bot/bot/rag_service.py**
```diff
- sys.path.append(str(Path(__file__).parent.parent.parent / "shared"))
+ sys.path.append('/app/shared')
```

### **üìÑ services/shared/models/database.py**
```diff
- from sqlalchemy.ext.declarative import declarative_base
- Base = declarative_base()
+ from sqlalchemy.orm import sessionmaker, DeclarativeBase
+ class Base(DeclarativeBase):
+     pass
```

### **üìÑ services/shared/models/__init__.py**
```diff
- from .user import User, Admin
+ from .user import User
+ from .admin import Admin
```

---

## üéØ **–†–ï–ó–£–õ–¨–¢–ê–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô:**

### **‚úÖ –£–°–¢–†–ê–ù–ï–ù–´ –ü–†–û–ë–õ–ï–ú–´:**
1. ‚úÖ **ModuleNotFoundError** - –ø–∞–∫–µ—Ç—ã —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
2. ‚úÖ **ImportError** - –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ
3. ‚úÖ **SQLAlchemy –æ—à–∏–±–∫–∏** - –æ–±–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é API
4. ‚úÖ **–ü—É—Ç–∏ –∫ –º–æ–¥—É–ª—è–º** - —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è Docker –æ–∫—Ä—É–∂–µ–Ω–∏—è

### **‚úÖ –ü–†–û–í–ï–†–ï–ù–ù–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´:**
- ‚úÖ Dockerfile —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- ‚úÖ Python –∏–º–ø–æ—Ä—Ç—ã –∏ –ø—É—Ç–∏ –∫ –º–æ–¥—É–ª—è–º  
- ‚úÖ SQLAlchemy –º–æ–¥–µ–ª–∏ –∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ Requirements.txt –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤

### **‚úÖ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –ó–ê–ü–£–°–ö–£:**
- ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –≤–∞–ª–∏–¥–Ω–∞
- ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã
- ‚úÖ Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

---

## üöÄ **–°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì:**

**–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –ë–ï–ó –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–æ–≤!**

–ò—Å–ø–æ–ª—å–∑—É–µ–º —É–∂–µ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–∑—ã —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º –∫–æ–¥–æ–º:
```bash
docker-compose up -d
```

**–í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞:** 2-3 –º–∏–Ω—É—Ç—ã (–±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏)

---

**üéâ –í–°–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò –£–°–¢–†–ê–ù–ï–ù–´! –ü–†–û–ï–ö–¢ –ì–û–¢–û–í –ö –ó–ê–ü–£–°–ö–£!** 